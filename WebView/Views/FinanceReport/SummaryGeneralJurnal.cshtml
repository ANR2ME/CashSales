@{
    ViewBag.Title = "Summary General Jurnal";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Head {

}
@section Scripts {
    <script type="text/javascript" src="@Url.Content("~/Content/apps_js/tools.js")"></script>

    <script type="text/javascript">
        function myformatter(date) {
            var y = date.getFullYear();
            var m = date.getMonth() + 1;
            var d = date.getDate();
            return y + '-' + (m < 10 ? ('0' + m) : m) + '-' + (d < 10 ? ('0' + d) : d);
        }

        function myparser(s) {
            if (!s) return new Date();
            var ss = (s.split('-'));
            var y = parseInt(ss[0], 10);
            var m = parseInt(ss[1], 10);
            var d = parseInt(ss[2], 10);
            if (!isNaN(y) && !isNaN(m) && !isNaN(d)) {
                return new Date(y, m - 1, d);
            } else {
                return new Date();
            }
        }
    </script>
}

<script type="text/javascript">
    $(document).ready(function () {
        var today = new Date();
        var vPayment = "";
        var vName = "";
        var vReport = "";
        var v_DateFrom = "";
        var v_DateTo = "";

        $("#cboTahun").val(@DateTime.Today.Year);
        $('#cboBulan').val(@DateTime.Today.Month);

        $('.panel-tool-close').hide();
        $("#txt_from").datebox('setValue', dateFormat(today, 'YYYY-MM-DD'));
        $("#txt_to").datebox('setValue', dateFormat(today, 'YYYY-MM-DD'));
        $('#txtcompanyname').attr("disabled", true);

        $('#monthly').click(function () {
            $('#trmonthly').show();
            $('#trcustom').hide();
        });

        $('#custom').click(function () {
            $('#trmonthly').hide();
            $('#trcustom').show();
        });

        $('#btnprint').click(function () {

            var vTahun = $("#cboTahun").val();
            var vBulan = $('#cboBulan').val();
            var vLastDate = new Date((new Date(vTahun, vBulan, 1)) - 1);
            var vLastDayOfMonth = vLastDate.getDate();

            if ($("#monthly").is(":checked")) {
                v_DateFrom = vTahun.concat("-", vBulan, "-01");
                v_DateTo = vTahun.concat("-", vBulan, "-", vLastDayOfMonth);
            }
            else if ($("#custom").is(":checked")) {
                v_DateFrom = $("#txt_from").datebox('getValue');
                v_DateTo = $("#txt_to").datebox('getValue');
            }

            window.open(base_url + "FinanceReport/PrintSummaryGeneralJurnal?pTanggal1=" + v_DateFrom + "&pTanggal2=" + v_DateTo);
        });

    });
</script>

<!--  Dialog Payable Cost List -->
<div id="summarygl" class="easyui-panel" title="Summary General Ledger Report" style="width: 600px; padding: 10px 10px 10px 30px;">
    <table width="100%" border="0" cellpadding="2" cellspacing="0">
        <tr>
            <td width="27%">Company</td>
            <td colspan="3">
                <input id="txtcompanyname" type="text" size="47" maxlength="47" align="left" value="@infoss.Models.AccountModels.GetCompanyName()" /></td>
        </tr>
        <tr>
            <td>Option Report</td>
            <td>
                <label>
                    <input name="report" type="radio" id="monthly" value="Monthly" checked="checked" />Monthly</label></td>
            <td>&nbsp;</td>
            <td>
                <label>
                    <input name="report" type="radio" id="custom" value="Custom" />Custom Periode</label></td>
        </tr>
        <tr id="trmonthly">
            <td>Period</td>
            <td colspan="3">Month:
		            <select name="cboBulan" id="cboBulan" style="width: 150px;">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                &nbsp;&nbsp;
                Year:
                <select name="cboTahun" id="cboTahun">
                    @for (int i = DateTime.Today.Year - 10; i <= DateTime.Today.Year + 1; i++)
                    {
                        <option value="@i">@i</option>
                    }
                </select>
            </td>
            <td>&nbsp;</td>
            <td></td>
        </tr>
        <tr id="trcustom" style="display: none">
            <td>Custom Period</td>
            <td><span style="width: 95px; float: left">
                <input class="easyui-datebox" size="10" id="txt_from" data-options="formatter:myformatter,parser:myparser" />
            </span></td>
            <td align="left">To</td>
            <td><span style="width: 95px; float: left">
                <input class="easyui-datebox" size="10" id="txt_to" data-options="formatter:myformatter,parser:myparser" />
            </span></td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td width="22%">&nbsp;</td>
            <td width="6%">&nbsp;</td>
            <td width="45%">&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td><a id="btnprint" href="#" class="easyui-linkbutton" iconcls="icon-print">Print</a></td>
        </tr>
        <tr>
            <td colspan="4">&nbsp;</td>
        </tr>
    </table>
</div>
<!-- END Dialog Payable Cost List -->

